<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>Geant4安装</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="author" content="xrfind">
    <meta name="copyright" content="copyright (c) 三月 08, 2011 xrfind">
    <link rel="stylesheet" type="text/css" href="../../css/style.css" />
    <link type="image/x-icon" rel="shortcut icon" href="../../css/favicon.ico"/>
    <script type="text/javascript" src="../../js/jquery.min.js"></script>
    <script type="text/javascript" src="../../js/moment.min.js"></script>
    <script type="text/javascript" src="../../js/custom.js"> </script> 
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-36694423-1']);
        _gaq.push(['_setDomainName', 'rrrui.com']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script> 
</head>
<body>
    <div id="htop" style="width:128px;height:128px">
    </div>
    <div id="content">
        
<h1 id="toc_1">Geant4安装</h1>
<p>
安装主要基于这个文档<a href="Installing Geant4 Release 4.9.2.p02 on Linux.html">Installing Geant4 Release 4.9.2.p02 on Linux</a>，这个文档是在Geant4官网上下的。
</p>

<p>
版本如上所示，使用的是4.9.4.p02；从上面的网页中，可以看到下面安装中需要的程序包，都可以直接的下载。
</p>

<p>
依据这个文档，给出如下解释。
</p>

<p>
安装分成3个部分：
</p>
<ol>
<li>
安装CLHEP

<li>
安装G4EMLOW.6.2.tar.gz

<li>
安装geant4

</ol>

<h2 id="toc_1.1">在依据上述网页安装之前</h2>
<p>
在依据上述网页安装之前，需要规划好你的安装目录，虽然在安装的时候也可以一步一步做，但有个整体的意识总是好的。
</p>

<p>
我的规划如下：
</p>
<ul>
<li>
在我个人的目录下 <em>/home/xrfind</em> 建立一个 <em>Geant4</em> 目录：<code>mkdir ~/Geant4</code>。

<li>
在Geant4中建立两个目录 <em>InstallGeant4</em> 和 <em>WorkDirForGeant4</em> ，分别作为安装目录和工作目录。

<li>
在 <em>InstallGeant4</em> 下，建立两个目录 <em>CLHEP</em> 和 <em>geant4</em> 。

<li>
将网页中的 <em>clhep-2.0.4.2.tgz</em> 和 <em>geant4.9.2.p02.tar.gz</em> 下载下来，然后分别copy到上述的两个目录中。

</ul>

<h2 id="toc_1.2">安装CLHEP</h2>
<ol>
<li>
<code>cd ~/Geant4/InstallGeant4/CLHEP</code>  	<sup><small>进入目录</small></sup>

<li>
<code>tar -zxvf clhep-2.0.4.2.tgz</code>			<sup><small>在上节中已经将该文件放入 <em>CLHEP</em> 中了，这里解压</small></sup>

<li>
<code>cd 2.0.4.2/CLHEP</code>					<sup><small>进入目录</small></sup>

<li>
<code>./configure --prefix /home/xrfind/Geant4/InstallGeant4/CLHEP</code>	<sup><small>配置</small></sup>

<li>
<code>make</code>	<sup><small>编译</small></sup>

<li>
<code>make install</code>	<sup><small>安装</small></sup>

</ol>

<p>
<strong>注意：的就是第四步，注意目录路径；且configure开头字母小写。</strong>
</p>

<h2 id="toc_1.3">安装G4EMLOW.6.2.tar.gz</h2>
<ol>
<li>
<code>cd ~/Geant4/InstallGeant4/geant4</code>

<li>
<code>tar -zxvf geant4.9.2.p02.tar.gz</code>		

<li>
<code>cd  geant4.9.2.p02</code>

<li>
<code>mkdir data</code>  <sup><small>建立一个data文件夹</small></sup>

<li>
<code>cp xxx/G4EMLOW.6.2.tar.gz data</code>	<sup><small>将G4EMLOW的文件copy到刚刚建立的data文件夹中，这里的xxx是你放置G4EMLOW的位置</small></sup>

<li>
<code>cd data</code>

<li>
<code>tar -zxvf G4EMLOW.6.2.tar.gz</code>

</ol>
<p>
这一步相对简单。
</p>

<h2 id="toc_1.4">安装geant4</h2>
<p>
官方文档中说的，在做这一步之前去喝杯咖啡，休息下。
</p>

<p>
我双手赞成，因为在这里我不止载了一回，最好有充裕的时间和安静的环境，不然宁可等下次。
</p>

<ol>
<li>
<code>cd ~/Geant4/InstallGeant4/gent4/geant4.9.2.p02</code>

<li>
<code>./Configure -build</code>   <sup><small>这里的一步下面详细讲述</small></sup>

<li>
<code>./Configure</code>

</ol>

<h3 id="toc_1.4.1">执行./Configure -build</h3>
<p>
当你执行<code>./Configure -build</code>这个命令之后，就进入了交互的环境。
</p>

<p>
在这里你需要回答很多的问题，大部分都保留默认，直接回车，下面列出需要特别关注的地方：
</p>
<ul>
<li>
当被询问 <strong>Could not find CLHEP installed on this system!Please, specify where CLHEP is installed:</strong> 的时候,你需要回答CLHEP安装在那个位置,就我的设置来说是: <em>/home/xrfind/Geant4/InstallGeant4/CLHEP</em> 。

<li>
当被询问 <strong>G4VIS_BUILD_OPENGLX_DRIVER  G4VIS_USE_OPENGLX</strong> 的时候，键入 <strong>y</strong> ，回车。

<li>
当被询问 <strong>G4VIS_BUILD_RAYTRACERX_DRIVER  G4VIS_USE_RAYTRACERX</strong> 的时候，键入 <strong>y</strong> ，回车。

</ul>
<p>
当输入最后一个回车的时候，就会开始编译安装了，需要蛮久的，等待吧。
</p>


<h2 id="toc_1.5">在使用之前的最后一步</h2>
<p>
有三条指令是需要你在每次运行Geant4程序之前必须执行的：
</p>
<ol>
<li>
<code>export G4WORKDIR=~/Geant4/InstallGeant4/WorkDirForGeant4</code>   <sup><small>这里定义工作目录</small></sup>

<li>
<code>export LD_LIBRARY_PATH=~/Geant4/InstallGeant4/CLHEP/lib/:$LD_LIBRARY_PATH</code>  <sup><small>这里定义工作时用到的库</small></sup>

<li>
<code>source ~/Geant4/InstallGeant4/geant4/geant4.9.2.p02/env.sh</code>   

<li>
<code>cd $G4WORKDIR</code> <sup><small>这里是进入工作目录，方便点，不是必须的</small></sup>

</ol>

<p>
但每次都输入那是很烦的，这里有两种方案来解决这个问题：
</p>
<ul>
<li>
执行<code>vim ~/.bashrc</code>，打开这个文件，在这个文件的最后将这三条指令加到最后，保存退出。

<li>
执行<code>vim ~/.g4</code>,建立一个新文件 <em>.g4</em> ，将这三条指令加入其中，保存退出。

</ul>

<p>
第一种方案会在你每次打开shell的时候都执行这三条指令，这样你就可以直接编译修改你的Geant4程序了，但同时，即使你使用终端做别的事情，这三句还是会执行，输出一堆东西。
</p>

<p>
第二种方案是在你需要做Geant4相关的事情的时候，使用<code>source .g4</code>这个指令，就相当于那三句指令，但简单的多，我使用的是这种方案。
</p>

<p>
好了到这里，你就可以使用Geant4了，但注意工作时要在工作目录哦。
</p>

    </div>

    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_title="Geant4安装";
        var disqus_shortname = 'xrfindvimwiki'; // required: replace example with your forum shortname
        var disqus_identifier="Geant4安装";

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


    <div id="hbottom">
        <strong id="Times">Time is getting Fewer and Fewer.</strong>
        <a href="../../index.html">HomePage</a>
        <a id="Contents" href="#">Contents</a>
    </div>
</body>
</html>
