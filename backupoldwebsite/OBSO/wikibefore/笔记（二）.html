<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>笔记（二）</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="author" content="xrfind">
    <meta name="copyright" content="copyright (c) 三月 08, 2011 xrfind">
    <link rel="stylesheet" type="text/css" href="../../css/style.css" />
    <link type="image/x-icon" rel="shortcut icon" href="../../css/favicon.ico"/>
    <script type="text/javascript" src="../../js/jquery.min.js"></script>
    <script type="text/javascript" src="../../js/moment.min.js"></script>
    <script type="text/javascript" src="../../js/custom.js"> </script> 
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-36694423-1']);
        _gaq.push(['_setDomainName', 'rrrui.com']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script> 
</head>
<body>
    <div id="htop" style="width:128px;height:128px">
    </div>
    <div id="content">
        
<h1 id="toc_1">笔记（二）-类型</h1>
<ul>
<li>
cpp中对类型的支持是非常广泛的，语言本身定义了一组基本类型和修改已有类型的方法，还提供了一组特征用于自定义类型。

</ul>

<h2 id="toc_1.1">算术类型</h2>
<ul>
<li>
当我们说一个算术类型的时候，其实其在计算机里面表示的bit数我们是不知道的，我们知道的，是其最少使用的bit书目。

<li>
默认的int，short，long都是signed。

<li>
cpp没有规定signed类型如何用bit来表示，这是由编译器决定的。一般的，首位决定正负。

<li>
负数付给无符号整型是不对的，类似于此的，显然应该避免。事实上，不同的编译器，给的结果是不同的，这是无法预测的。

<li>
char默认的signed还是unsigned是不确定的，应该避免使用char做计算。

<li>
推荐使用int和double。

</ul>

<h2 id="toc_1.2">字面值常量</h2>
<ul>
<li>
字面值常量都是有相应类型的。

<li>
内置类型有字面值常量，类类型没有。也没有任何标准库类型的字面值常量。

<li>
任何字面值常量，根据其字面得到其类型。包括类型，符号。

<li>
两个相邻的字符串字面值，之间仅由空格，制表符或换行符分开，那么这两个可以连接成一个新字符串字面值。

<li>
连接字符串字面值和宽字符串字面值的行为标准没有定义，结果未知，不该使用。

<li>
一个字符串字面值需要写在一行，不在一行需要反斜杠。

<li>
浮点型没有正负。

</ul>

<h2 id="toc_1.3">变量</h2>
<ul>
<li>
cpp中的变量都有特定的类型。

<li>
变量是左值。可左可右。

<li>
字面值常量是右值，只右。

<li>
变量名由字母，数字，下划线组成。不可数字开头。cpp区分大小写。

<li>
<code>char _;</code>是对的。

<li>
cpp支持两种初始化变量的形式：复制初始化“=”，直接初始化“（）”。

<li>
cpp中的初始化和赋值是不同的概念。初始化是建立一个对象并给他赋初始值，赋值则是擦除当前值并使用新值代替。在cpp中编写复杂的类时才会凸显两者之间的区别，对内置类型来数，两者之间的区别几乎没有。 <strong>直接初始化更好</strong>

<li>
初始化的一些规则：

<ul>
<li>
内置类型没有初始化，如果在函数体外部，则都初始化为0;

<li>
如果在函数体内部，不进行自动初始化。

</ul>
<li>
有些类类型没有默认构造函数，对于这类，每个定义都必须提供显式的初始化式，没有初始值是不可能定义这种类型的变量的了。

</ul>

<h3 id="toc_1.3.1">声明和定义</h3>
<ul>
<li>
<strong>为了让多个文件访问相同的变量，cpp区分了声明和定义。</strong> 

<li>
多文件的时候，cpp就是通过<code>#include</code>来搞定的。

<li>
单纯的声明是：<code>extern int x；</code>。 ----可以在函数体内部。

<li>
单纯的定义是：<code>int x；</code>。  

<li>
又是声明又是定义的是：<code>extern int x=1；</code>。  ----只可以在函数体外部。

<li>
定义只有一个，声明可以有很多，声明可以在定义之前，也可以在之后，可以有任意个。

<li>
名字从声明点开始，到声明所在区域结束处是可见的。

<li>
局部变量的定义屏蔽全局变量。

<li>
声明的约束： <strong>变量只在“从其定义处”开始到该声明所在的“作用域的结束处”才可以访问。</strong> 

</ul>

<h2 id="toc_1.4">const限定符</h2>
<ul>
<li>
<code>const int i=0；</code>，i不可以改变了，且，必须在这个语句中初始化。

<li>
const默认为文件的局部变量，而其他类型是全局的。

<li>
有两个文件：a.cc,b.cc，在a.cc中的<code>int i；</code>在b.cc中可以使用<code>extern int i;</code>来声明，但是，在a.cc中的<code>const int j=3；</code>在b.cc中使用<code>extern const int j;</code>也是不行的，必须在a.cc中写为<code>extern const int j=3;</code>才可以搞定。（这就是const的文件局部变量）。

<li>
这里说的不是#include，而是<code>g++ a.cc b.cc -o ab</code>。

</ul>

<h2 id="toc_1.5">引用</h2>
<ul>
<li>
<code>int a；int &amp;b =a；</code>，b和a指向的是同一个存储空间。就是这么简单。

<li>
引用类型不可以定义为自身类型的引用，但可以定义为其他所有类型的引用。

<li>
将普通引用引用到const变量是不合法的。就是<code>const int i=1；int &amp;j=i;</code>不合法，因为，j可以改变，但i不可以。

<li>
就下面两条记住就可以了：

<ul>
<li>
<strong>非const引用 只能 绑定到与该引用同类型的对象</strong>

<li>
<strong>const引用 可以 绑定到不同但相关的类型的对象或绑定到右值。</strong>

</ul>
</ul>

<h2 id="toc_1.6">typedef</h2>
<ul>
<li>
定义类型的同义词。

</ul>

<h2 id="toc_1.7">枚举</h2>
<ul>
<li>
enum

<li>
其初始化必须是常量表达式，同时，初始化还是挺有意思的，+1。

<li>
每个enum都定义了一个新的类型。

</ul>

<h2 id="toc_1.8">编写自己的头文件</h2>
<ul>
<li>
多文件编译和头文件是不同的。

<li>
头文件不应该放入定义，头文件应该放的是单纯的声明。-- <strong>这是因为头文件要放入多个文件中，不这样会产生重复定义变量。</strong>

<li>
但有三个例外：

<ul>
<li>
定义类

<li>
值在编译时候知道的const对象。

<li>
inline函数。

<li>
（现在我也不知道原因）。

<li>
对第二条的指示

<ul>
<li>
头文件里面帮汉了一个const变量，那么每个包含该头文件的源文件都有了自己的const变量，其名称和值都一样。（const变量是文件局部变量。）（实际上编译器会使用常量表达式来代替const变量，所以，不会浪费任何存储空间）。

</ul>
</ul>
<li>
#include是cpp预处理器的一部分，预处理器在编译器之前运行，用来处理程序的源代码。

<li>
<strong>设计头文件的时候，应该使其可以多次包含在同一源文件中，之一点很重要，我们必须保持多次包含头一个头文件不会引起该头文件定义的类和对象被多次定义。使得头文件安全的通用做法，是使用预处理器定义头文件保护符。</strong>

</ul>

<h3 id="toc_1.8.1">预处理器变量</h3>
<ul>
<li>
任何与预处理器变量相匹配的名字的使用都关联到该预处理器变量。

<li>
预处理器变量有两种状态：已定义，未定义。

<li>
#define 定义一个预处理器变量。

<li>
#ifndef 检测，未定义则处理所有指示，直到#endif。

</ul>

<h2 id="toc_1.9">心得</h2>
<ul>
<li>
<a href="输入/输出.html">输入/输出</a> 

<li>
<a href="cpp程序与系统的关系.html">cpp程序与系统的关系</a> 

<li>
<a href="语言的本质.html">语言的本质</a>

<li>
<a href="命名空间.html">命名空间</a>

</ul>

    </div>

    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_title="笔记（二）";
        var disqus_shortname = 'xrfindvimwiki'; // required: replace example with your forum shortname
        var disqus_identifier="笔记（二）";

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


    <div id="hbottom">
        <strong id="Times">Time is getting Fewer and Fewer.</strong>
        <a href="../../index.html">HomePage</a>
        <a id="Contents" href="#">Contents</a>
    </div>
</body>
</html>
